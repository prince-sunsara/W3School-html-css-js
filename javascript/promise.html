<html>
<title>JavaScript Promise</title>
<style>
    *{
        margin: 0;
    }
</style>
<body>
    <h4 id="demo"></h4>
    <script>
        /* normal example */ 
        function display(some) {
            document.getElementById("demo").innerHTML = some;
        }
        // let myPromise = new Promise(
        //     function (myResolve, myReject) {
        //         let x = 0;
        //         // let x = 5; // return error
        //         if (x == 0) {
        //             myResolve("OK!");
        //         }
        //         else {
        //             myReject("ERROR!");
        //         }
        //     }
        // );
        // myPromise.then(
        //     function (value) {
        //         display(value);
        //     },
        //     function (error) {
        //         display(error);
        //     }
        // );

        /* example using Promise */

        /* setTimeout() */
        // let myPromise = new Promise(function(myResolve, myReject) {
        //     setTimeout(function() {
        //         myResolve("I Love You!!");
        //     }, 3000)
        // });
        // myPromise.then(function(value) {
        //     document.getElementById("demo").innerHTML = value;
        // });

        /* Waiting for a file : example using Callback */
        // function getFile(myCallback) {
            //     let req = new XMLHttpRequest();
            //     req.open('GET',"async_mycar.html");
            //     req.onload = function() {
                //         if (req.status == 200) {
                    //             myCallback(req.responseText);
                    //         }
                    //         else {
                        //             myCallback("Error : " + req.status);
        //         }
        //     }
        //     req.send();
        // }
        // getFile(display);

        /* Waiting for a file : example using Callback */
        let myPromise = new Promise(
            function(myResolve, myReject) {
                let req = new XMLHttpRequest();
                req.open('get', "async_mycar.html");
                req.onload = function() {
                    if (req.status == 200) {
                        myResolve(req.response);
                    }
                    else {
                        myReject("File not Found..");
                    }
                };
                req.send();
        });
        myPromise.then(
            function(value){
                display(value);
            },
            function(error){
                display(error);
            }
        );
    </script>
</body>
</html>